<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Painel - O Estrangeiro</title>
</head>
<body>
  <h1>ðŸ“‹ Painel de Pedidos</h1>

  <h3>Novo Pedido</h3>

  <input id="cliente" placeholder="Nome do cliente" /><br /><br />
  <input id="pedido" placeholder="Pedido" /><br /><br />
  <textarea id="obs" placeholder="ObservaÃ§Ãµes"></textarea><br /><br />

  <button onclick="enviarPedido()">Enviar Pedido</button>

  <hr />

  <h3>Pedidos Recebidos</h3>
  <ul id="lista"></ul>

  <script>
    function enviarPedido() {
      const cliente = document.getElementById("cliente").value;
      const pedido = document.getElementById("pedido").value;
      const obs = document.getElementById("obs").value;

      fetch("/api/pedidos", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ cliente, pedido, obs })
      }).then(() => {
        carregarPedidos();
      });
    }

    function carregarPedidos() {
      fetch("/api/pedidos")
        .then(res => res.json())
        .then(data => {
          const lista = document.getElementById("lista");
          lista.innerHTML = "";
          data.forEach(p => {
            const li = document.createElement("li");
            li.innerText = `${p.cliente} - ${p.pedido} (${p.obs})`;
            lista.appendChild(li);
          });
        });
    }

    carregarPedidos();
  </script>
</body>
</html>
